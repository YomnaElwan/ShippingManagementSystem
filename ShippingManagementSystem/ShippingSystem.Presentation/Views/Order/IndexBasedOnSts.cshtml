@using ShippingSystem.Domain.Entities
@model List<OrderStatus>
@{
    ViewData["Title"] = "IndexBasedOnSts";
}

<h1>Index</h1>
<a asp-action="Add" asp-controller="Order" class="btn btn-primary"><i class="bi bi-plus-circle"></i> Add New</a>
<nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3">
    
    <div class="navbar-collapse collapse d-sm-inline-flex justify-content-between">
        <ul class="navbar-nav flex-grow-1">
            <li class="nav-item">
                <a class="nav-link text-dark" href="#" onclick="GetList()">All</a>
            </li>
            @foreach (var item in Model)
            {
                <li class="nav-item">
                    <a class="nav-link text-dark" href="#" onclick="GetOrderList(@item.Id)">@item.Name</a>
                </li>
            }
        </ul>
    </div>
</nav>

<div id="tableId"></div>


<script src="~/lib/jquery/dist/jquery.js"></script>
<script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
<script src="~/lib/jquery-validation-unobtrusive/dist/jquery.validate.unobtrusive.min.js"></script>
<script>
   function GetOrderList(statusId){
         var tableElement=$("#tableId");
        tableElement.html("");
          $.ajax({
                url:'/Order/GetOrderListByOrderStatus?orderStsId='+statusId,
                type:'GET',
                success:function(result){
                    tableElement.append(result);
                },
                error:function(){
                    alert("Error Loading Orders")
                }
          });
   }
</script>
<script>
    function GetList(){
        var tableElement=$("#tableId");
        tableElement.html("");
        $.ajax({
            url:'/Order/Index',
            type:'GET',
            success:function(result){
                tableElement.append(result);
            },
            error:function(){
                alert("Error Loading Orders");
            }
        });
    }
</script>